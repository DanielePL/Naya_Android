# Railway configuration for Prometheus Backend Service
# Point Railway to the backend directory

[build]
builder = "NIXPACKS"
# Don't override buildCommand - let Nixpacks auto-detect Python

[deploy]
# Start command runs from backend directory with venv activated
startCommand = ". /opt/venv/bin/activate && cd backend && uvicorn prometheus_backend.main:app --host 0.0.0.0 --port $PORT"
healthcheckPath = "/"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Only watch backend files for changes
[watch]
include = ["backend/**"]
